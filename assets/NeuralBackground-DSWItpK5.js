import{R as t,r as e,j as r}from"./motion-vendor-DqMYmErq.js";import{C as n,u as a,P as o,a as s,A as i,I as c,O as l,b as u,V as m,B as d,F as h}from"./three-vendor-CL1__XSZ.js";import{u as f}from"./index-CCEXPTjU.js";import"./scroll-vendor-CmZmYYXb.js";function x({scrollProgress:t,particleCount:n,mouseRef:c,isInitialized:l}){const u=e.useRef(),[m]=e.useMemo(()=>{const t=n,e=new Float32Array(3*t);for(let r=0;r<t;r++){const t=Math.random()*Math.PI*2,n=Math.acos(2*Math.random()-1),a=3+8*Math.random();e[3*r]=a*Math.sin(n)*Math.cos(t),e[3*r+1]=a*Math.sin(n)*Math.sin(t),e[3*r+2]=a*Math.cos(n)}return[e]},[n]);return a((e,r)=>{if(!u.current)return;let n=0,a=0;if(c&&c.current&&l&&l.current){const{clientX:t,clientY:e}=c.current;n=t/window.innerWidth*2-1,a=-e/window.innerHeight*2+1}u.current.rotation.y+=.05*r,u.current.rotation.x+=.02*r,u.current.rotation.x+=.02*(.3*a-u.current.rotation.x),u.current.rotation.y+=.02*(.3*n-u.current.rotation.y);const o=t?.get()||0;u.current.scale.setScalar(1+.5*o)}),r.jsx(o,{ref:u,positions:m,stride:3,frustumCulled:!0,children:r.jsx(s,{transparent:!0,vertexColors:!0,size:.015,sizeAttenuation:!0,depthWrite:!1,blending:i,opacity:.8})})}function M(){const t=e.useRef(),n=e.useMemo(()=>new c(1,1),[]),o=e.useMemo(()=>new l,[]),s=e.useMemo(()=>Array.from({length:5},(t,e)=>({initialPosition:[10*(Math.random()-.5),10*(Math.random()-.5),5*(Math.random()-.5)],scale:.3+.5*Math.random(),color:["#a855f7","#3b82f6","#22d3ee","#ec4899","#10b981"][e],phase:Math.random()*Math.PI*2,rotation:{x:0,y:0}})),[]);return e.useEffect(()=>{t.current&&(s.forEach((e,r)=>{const n=new u(e.color);t.current.setColorAt(r,n)}),t.current.instanceColor.needsUpdate=!0)},[s]),a((e,r)=>{t.current&&(s.forEach((n,a)=>{const s=n.initialPosition[1]+.5*Math.sin(e.clock.elapsedTime+n.phase);n.rotation.x+=.2*r,n.rotation.y+=.3*r,o.position.set(n.initialPosition[0],s,n.initialPosition[2]),o.rotation.set(n.rotation.x,n.rotation.y,0),o.scale.setScalar(n.scale),o.updateMatrix(),t.current.setMatrixAt(a,o.matrix)}),t.current.instanceMatrix.needsUpdate=!0)}),r.jsx("instancedMesh",{ref:t,args:[n,null,s.length],frustumCulled:!1,children:r.jsx("meshBasicMaterial",{transparent:!0,opacity:.3,wireframe:!0,vertexColors:!0})})}function p(){const t=e.useRef(),n=e.useMemo(()=>{const t=[];for(let r=0;r<20;r++){const e=new m(15*(Math.random()-.5),15*(Math.random()-.5),10*(Math.random()-.5)),r=new m(e.x+5*(Math.random()-.5),e.y+5*(Math.random()-.5),e.z+3*(Math.random()-.5));t.push(e.x,e.y,e.z),t.push(r.x,r.y,r.z)}const e=new d;return e.setAttribute("position",new h(t,3)),e},[]);return a(e=>{t.current&&(t.current.rotation.y=.02*e.clock.elapsedTime,t.current.rotation.z=.1*Math.sin(.5*e.clock.elapsedTime))}),r.jsx("lineSegments",{ref:t,geometry:n,children:r.jsx("lineBasicMaterial",{color:"#6366f1",transparent:!0,opacity:.15})})}const j=t.memo(function({scrollProgress:t}){const[a,o]=e.useState(1500),{mouseRef:s,isInitialized:i}=f();return e.useEffect(()=>{const t=window.matchMedia("(max-width: 768px)"),e=t=>o(t.matches?500:1500);return e(t),t.addEventListener("change",e),()=>t.removeEventListener("change",e)},[]),r.jsxs("div",{className:"neural-background",children:[r.jsxs(n,{camera:{position:[0,0,10],fov:60},dpr:[1,1.5],gl:{antialias:!0,alpha:!0,powerPreference:"high-performance"},children:[r.jsx("ambientLight",{intensity:.5}),r.jsx(x,{scrollProgress:t,particleCount:a,mouseRef:s,isInitialized:i}),r.jsx(M,{}),r.jsx(p,{})]}),r.jsx("div",{className:"gradient-overlay gradient-overlay--top"}),r.jsx("div",{className:"gradient-overlay gradient-overlay--bottom"}),r.jsx("div",{className:"ambient-orb ambient-orb--1"}),r.jsx("div",{className:"ambient-orb ambient-orb--2"}),r.jsx("div",{className:"ambient-orb ambient-orb--3"})]})});export{j as default};
